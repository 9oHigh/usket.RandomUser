name: Build & Test
on:
  # main ë¸Œëœì¹˜ì— push ë‚˜ pull request ì´ë²¤íŠ¸ê°€ ë°œìƒí•˜ë©´ í•˜ìœ„ workflow ì‹¤í–‰
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]
jobs: # workflowëŠ” í•˜ë‚˜ ì´ìƒì˜ jobsë¡œ ë§Œë“¤ì–´ì§
  build:
    runs-on: macos-latest
    steps:
    # uses í‚¤ì›Œë“œë¥¼ í†µí•´ Github Actionsì—ì„œ ê¸°ë³¸ìœ¼ë¡œ ì œê³µí•˜ëŠ” ì•¡ì…˜ì„ ì‚¬ìš© ê°€ëŠ¥. 
    # repositoryì— ì²´í¬ì•„ì›ƒ
    - uses: actions/checkout@v2
    
    # Package.resolvedì—ì„œ ì˜¤ë¥˜ê°€ ë°œìƒ / ì œê±°í•˜ê³ , resolve
    - name: Delete Package.resolved
      run: rm -f usket.RandomUser/usket.RandomUser/usket.RandomUser/usket.RandomUser.xcodeproj/project.xcworkspace/xcshareddata/swiftpm/Package.resolved
    - name: Resolve package dependencies
      run: xcodebuild -resolvePackageDependencies -project usket.RandomUser/usket.RandomUser.xcodeproj
    - name: Start xcode build ğŸ› 
      run: |
        xcodebuild clean test -project usket.RandomUser/usket.RandomUser.xcodeproj -scheme usket.RandomUser -destination 'platform=iOS Simulator,name=iPhone 12,OS=16.5'
